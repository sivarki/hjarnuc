<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Web server extending with mvc - Forge Networking Remastered</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Web server extending with mvc";
    var mkdocs_page_input_path = "web-server-extending-with-mvc.md";
    var mkdocs_page_url = "/web-server-extending-with-mvc/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Forge Networking Remastered</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <span class="caption-text">Home</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="..">Home</a>
                </li>
                <li class="">
                    
    <a class="" href="../authoritative-design/">Authoritative design</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Getting Started</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../getting-started/">Getting started</a>
                </li>
                <li class="">
                    
    <a class="" href="../basic-moving-cube-example/">Basic moving cube example</a>
                </li>
                <li class="">
                    
    <a class="" href="../basic-rpc-example/">Basic rpc example</a>
                </li>
                <li class="">
                    
    <a class="" href="../basic-instantiation-example/">Basic instantiation example</a>
                </li>
                <li class="">
                    
    <a class="" href="../jump-start-guide/">Jump start guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Network Contract Wizard (NCW)</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../network-contract-wizard-ncw/">Network contract wizard ncw</a>
                </li>
                <li class="">
                    
    <a class="" href="../extending-generated-classes/">Extending generated classes</a>
                </li>
                <li class="">
                    
    <a class="" href="../name-collision-issues/">Name collision issues</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Network Object</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../changing-ownership/">Changing ownership</a>
                </li>
                <li class="">
                    
    <a class="" href="../destroying-the-network-object/">Destroying the network object</a>
                </li>
                <li class="">
                    
    <a class="" href="../fields/">Fields</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Remote Procedure Calls (RPCs)</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../remote-procedure-calls/">Remote procedure calls</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../buffered-rpcs/">Buffered rpcs</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../sending-rpc-to-a-single-player/">Sending rpc to a single player</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../rpcargs-and-rpcinfo-structs/">Rpcargs and rpcinfo structs</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../rpc-validation-by-server/">Rpc validation by server</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../replacing-previous-buffered-rpcs/">Replacing previous buffered rpcs</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../clearing-buffered-rpcs/">Clearing buffered rpcs</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Unity Integration</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../gameobject-execution-order/">Gameobject execution order</a>
                </li>
                <li class="">
                    
    <a class="" href="../network-instantiation/">Network instantiation</a>
                </li>
                <li class="">
                    
    <a class="" href="../threading-in-unity/">Threading in unity</a>
                </li>
                <li class="">
                    
    <a class="" href="../main-threading-rpcs/">Main threading rpcs</a>
                </li>
                <li class="">
                    
    <a class="" href="../running-unity-specific-code-on-the-main-thread/">Running unity specific code on the main thread</a>
                </li>
                <li class="">
                    
    <a class="" href="../unity-integration-network-start/">Unity integration network start</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Basic Network Samples</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../server-hosting-code/">Server hosting code</a>
                </li>
                <li class="">
                    
    <a class="" href="../client-connecting-code/">Client connecting code</a>
                </li>
                <li class="">
                    
    <a class="" href="../server-disconnect-client-code/">Server disconnect client code</a>
                </li>
                <li class="">
                    
    <a class="" href="../ban-client-code/">Ban client code</a>
                </li>
                <li class="">
                    
    <a class="" href="../send-binary-frame/">Send binary frame</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Events</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../connection-cycle-events/">Connection cycle events</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Scene Navigation</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../loading-scenes/">Loading scenes</a>
                </li>
                <li class="">
                    
    <a class="" href="../scene-events/">Scene events</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../rewinding/">Rewinding</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Debugging</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../network-logging/">Network logging</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">NetWorker</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../temporarily-blocking-connections/">Temporarily blocking connections</a>
                </li>
                <li class="">
                    
    <a class="" href="../thread-safe-player-iteration/">Thread safe player iteration</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Master Server</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../master-server-quick-start/">Master server quick start</a>
                </li>
                <li class="">
                    
    <a class="" href="../connecting-to-master-server/">Connecting to master server</a>
                </li>
                <li class="">
                    
    <a class="" href="../getting-host-list-from-master-server/">Getting host list from master server</a>
                </li>
                <li class="">
                    
    <a class="" href="../windows-server-firewall-setup/">Windows server firewall setup</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../nat-hole-punching/">NAT Hole Punching</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Web Server</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../web-server-jumpstart/">Web server jumpstart</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Web server extending with mvc</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#web-server-extending-with-mvc">Web Server Extending With MVC</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#our-custom-test-controller">Our custom "Test" controller</a></li>
        
            <li><a class="toctree-l4" href="#adding-your-new-controller">Adding your new controller</a></li>
        
            <li><a class="toctree-l4" href="#our-testhtml-view">Our "test.html" view</a></li>
        
            <li><a class="toctree-l4" href="#done">Done</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../web-server-command-plugins/">Web server command plugins</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../working-with-multiple-sockets/">Working With Multiple Sockets</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../lan-discovery/">LAN Discovery</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Troubleshooting</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../troubleshooting/">Troubleshooting</a>
                </li>
                <li class="">
                    
    <a class="" href="../throttling-network-internal/">Throttling network internal</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../offline-mode/">Offline Mode</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../lobby/">Lobby System</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Contributing</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../adding-and-updating-docs/">Adding and updating docs</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Forge Networking Remastered</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Web Server &raquo;</li>
        
      
    
    <li>Web server extending with mvc</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="web-server-extending-with-mvc">Web Server Extending With MVC</h1>
<p>Yes, the web server is a full blown website in it's own right. Being this, you may want to add new controllers and views to the site. We'll start by making a controller named "Test". This will make it so that you can go to <strong>localhost:15942/test</strong> and have your own custom view processed and shown.</p>
<h4 id="our-custom-test-controller">Our custom "Test" controller</h4>
<pre><code class="csharp">public class Test : PageController
{
    public Test(NetWorker socket, ForgeWebServer webserver)
        : base(socket, webserver)
    {
        // Key string used in html like this: &lt;% print %&gt;
        variables.Add(&quot;print&quot;, Print);
    }

    public string Print()
    {
        return &quot;HELLO TEST STRING ACTION!&quot;;
    }

    public override string Render()
    {
        return PresentHTML(&quot;test&quot;);
    }
}
</code></pre>

<p>As you can see from above, there are a lot of things going on, so we'll break them down one by one.
1. You <strong>must</strong> derive your new controller from the <code>PageController</code> class
2. You <strong>must</strong> create the constructor for your controller with the supplied input arguments
3. You should add any model pulling functions inside the constructor to the variables
4. You should create methods that are going to return the data needed for the variables
5. You <strong>must</strong> override the render method as it is abstract. This is where you return the HTML for your page. You can use the built in <code>PresentHTML</code> method you get from the parent class and pass in the name of your HTML page that will be presented.</p>
<p>When you add callbacks assigned to a string to <code>variables</code> as seen above with <strong>print</strong>, you are making it so that you can use the <code>string</code> response from those callbacks within your HTML page. See the <strong>test.html</strong> example below to see how it is used in the <code>&lt;% %&gt;</code> tags.</p>
<p>Now that you have your new controller, you are probably curious on how you can get it to be used while the web server is running. Below you will notice the line that has <code>TryAddController</code> which will try to add your new controller to the web server. Notice that all we have to do is new up the controller and pass it into this method.</p>
<h4 id="adding-your-new-controller">Adding your new controller</h4>
<pre><code class="csharp">ForgeWebServer ws = new ForgeWebServer(server, 15942, dict);
ws.Start();

ws.TryAddController(new Test(server, ws));
</code></pre>

<p>Finally, we are ready to create our view. A view is something that the controller will present to the user when they request your controllers web page. We will name this file <strong>test.html</strong> because we are passing <strong>test</strong> into the <code>PresentHTML</code> of our controller. If we were to name this html file <strong>cats</strong> then we would need to update the controller to pass <strong>"cats"</strong> into the <code>PresentHTML</code> method of the <code>Render</code> function.</p>
<h4 id="our-testhtml-view">Our "test.html" view</h4>
<pre><code class="html">&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;My Test Page&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello &lt;% print %&gt;&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><strong>Note if you are not sure what the HTML page is, be sure to check out the <a href="../web-server-jumpstart/">Jumpstart Guide</a></strong></p>
<h2 id="done">Done</h2>
<p>That's it, you have your fancy new controller and view and you can start using it immediately inside of your web server.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../web-server-command-plugins/" class="btn btn-neutral float-right" title="Web server command plugins">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../web-server-jumpstart/" class="btn btn-neutral" title="Web server jumpstart"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../web-server-jumpstart/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../web-server-command-plugins/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
